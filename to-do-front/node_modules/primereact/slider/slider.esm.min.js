import*as e from"react";import{useEventListener as n}from"primereact/hooks";import{ObjectUtils as r,classNames as t,DomHandler as a}from"primereact/utils";function l(){return l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},l.apply(this,arguments)}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function o(e){if(Array.isArray(e))return i(e)}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,n){if(e){if("string"==typeof e)return i(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,n):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){if(Array.isArray(e))return e}function m(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,l=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(t=r.next()).done)&&(l.push(t.value),!n||l.length!==n);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return l}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,n){return f(e)||m(e,n)||c(e,n)||d()}var v=e.memo(e.forwardRef((function(i,f){var m=e.useRef(null),d=e.useRef(0),h=e.useRef(!1),y=e.useRef(!1),g=e.useRef(0),b=e.useRef(0),w=e.useRef(0),x=e.useRef(0),E=i.range?i.value||[0,100]:i.value||0,S="horizontal"===i.orientation,A="vertical"===i.orientation,R=p(n({type:"mousemove",listener:function(e){return Y(e)}}),2),I=R[0],C=R[1],N=p(n({type:"mouseup",listener:function(e){return H(e)}}),2),j=N[0],D=N[1],M=p(n({type:"touchmove",listener:function(e){return Y(e)}}),2),O=M[0],T=M[1],F=p(n({type:"touchend",listener:function(e){return H(e)}}),2),P=F[0],k=F[1],z=function(e,n){B(e,(i.range?E[d.current]:E)+(i.step||1)*n),e.preventDefault()},W=function(e,n){i.disabled||(y.current=!0,X(),h.current=!0,d.current=n)},Y=function(e){y.current&&(_(e),e.preventDefault())},H=function(e){y.current&&(y.current=!1,i.onSlideEnd&&i.onSlideEnd({originalEvent:e,value:i.value}),C(),D(),T(),k())},K=function(e,n){I(),j(),W(0,n)},L=function(e,n){O(),P(),W(0,n)},U=function(e,n){if(!i.disabled){d.current=n;var r=e.key;"ArrowRight"===r||"ArrowUp"===r?z(e,1):"ArrowLeft"!==r&&"ArrowDown"!==r||z(e,-1)}},X=function(){var e=m.current.getBoundingClientRect();g.current=e.left+a.getWindowScrollLeft(),b.current=e.top+a.getWindowScrollTop(),w.current=m.current.offsetWidth,x.current=m.current.offsetHeight},_=function(e){var n=(S?100*((e.touches?e.touches[0].pageX:e.pageX)-g.current)/w.current:100*(b.current+x.current-(e.touches?e.touches[0].pageY:e.pageY))/x.current)/100*(i.max-i.min)+i.min;if(i.step){var r=i.range?E[d.current]:E,t=n-r;t<0?n=r+Math.ceil(n/i.step-r/i.step)*i.step:t>0&&(n=r+Math.floor(n/i.step-r/i.step)*i.step)}else n=Math.floor(n);return B(e,n)},B=function(e,n){var r,t=parseFloat(n.toFixed(10)),a=t;return i.range?(0===d.current?t<i.min?t=i.min:t>E[1]&&(t=E[1]):t>i.max?t=i.max:t<E[0]&&(t=E[0]),(a=o(r=E)||u(r)||c(r)||s())[d.current]=t,i.onChange&&i.onChange({originalEvent:e,value:a})):(t<i.min?t=i.min:t>i.max&&(t=i.max),a=t,i.onChange&&i.onChange({originalEvent:e,value:a})),a},$=function(n,r,a){var l={transition:y.current?"none":null,left:null!==n&&n+"%",bottom:r&&r+"%"},o=t("p-slider-handle",{"p-slider-handle-start":0===a,"p-slider-handle-end":1===a,"p-slider-handle-active":d.current===a});return e.createElement("span",{className:o,style:l,tabIndex:i.tabIndex,role:"slider",onMouseDown:function(e){return K(0,a)},onTouchStart:function(e){return L(0,a)},onKeyDown:function(e){return U(e,a)},"aria-valuemin":i.min,"aria-valuemax":i.max,"aria-valuenow":n||r,"aria-labelledby":i["aria-labelledby"],"aria-label":i["aria-label"],"aria-orientation":i.orientation})};e.useImperativeHandle(f,(function(){return{props:i,getElement:function(){return m.current}}}));var q,G,J,Q,V=r.findDiffKeys(i,v.defaultProps),Z=t("p-slider p-component",i.className,{"p-disabled":i.disabled,"p-slider-horizontal":S,"p-slider-vertical":A}),ee=i.range?(q=100*(E[0]<i.min?0:E[0]-i.min)/(i.max-i.min),G=100*(E[1]>i.max?100:E[1]-i.min)/(i.max-i.min),J=S?$(q,null,0):$(null,q,0),Q=S?$(G,null,1):$(null,G,1),e.createElement(e.Fragment,null,e.createElement("span",{className:"p-slider-range",style:S?{left:q+"%",width:G-q+"%"}:{bottom:q+"%",height:G-q+"%"}}),J,Q)):function(){var n;n=E<i.min?0:E>i.max?100:100*(E-i.min)/(i.max-i.min);var r=S?{width:n+"%"}:{height:n+"%"},t=S?$(n,null,null):$(null,n,null);return e.createElement(e.Fragment,null,e.createElement("span",{className:"p-slider-range",style:r}),t)}();return e.createElement("div",l({ref:m,id:i.id,style:i.style,className:Z},V,{onClick:function(e){if(!i.disabled){if(!h.current){X();var n=_(e);i.onSlideEnd&&i.onSlideEnd({originalEvent:e,value:n})}h.current=!1}}}),ee)})));v.displayName="Slider",v.defaultProps={__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,"aria-label":null,"aria-labelledby":null};export{v as Slider};
