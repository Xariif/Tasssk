import*as e from"react";import n from"primereact/api";import{useMountEffect as r,useUpdateEffect as t,useUnmountEffect as o}from"primereact/hooks";import{Portal as l}from"primereact/portal";import{DomHandler as a,ZIndexUtils as c,ObjectUtils as u,classNames as i}from"primereact/utils";function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},d.apply(this,arguments)}function f(e){if(Array.isArray(e))return e}function m(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,l=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(l.push(t.value),!n||l.length!==n);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return l}}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function p(e,n){if(e){if("string"==typeof e)return s(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,n):void 0}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v=e.forwardRef((function(s,b){var k,h,S=e.useState(s.blocked),I=(h=2,f(k=S)||m(k,h)||p(k,h)||y()),g=I[0],w=I[1],E=e.useRef(null),x=e.useRef(null),A=function(){w(!0)},U=function(){var e=function(){w(!1),s.fullScreen&&a.removeClass(document.body,"p-overflow-hidden"),s.onUnblocked&&s.onUnblocked()};x.current?(a.addClass(x.current,"p-component-overlay-leave"),x.current.addEventListener("animationend",(function(){c.clear(x.current),e()}))):e()},j=function(){if(s.fullScreen&&(a.addClass(document.body,"p-overflow-hidden"),document.activeElement.blur()),s.autoZIndex){var e=s.fullScreen?"modal":"overlay";c.set(e,x.current,n.autoZIndex,s.baseZIndex||n.zIndex[e])}s.onBlocked&&s.onBlocked()};r((function(){g&&A()})),t((function(){s.blocked?A():U()}),[s.blocked]),o((function(){s.fullScreen&&a.removeClass(document.body,"p-overflow-hidden"),c.clear(x.current)})),e.useImperativeHandle(b,(function(){return{props:s,block:A,unblock:U,getElement:function(){return E.current}}}));var B=u.findDiffKeys(s,v.defaultProps),C=function(){if(g){var n=s.fullScreen?document.body:"self",r=i("p-blockui p-component-overlay p-component-overlay-enter",{"p-blockui-document":s.fullScreen},s.className),t=s.template?u.getJSXElement(s.template,s):null;return e.createElement(l,{element:e.createElement("div",{ref:x,className:r,style:s.style},t),appendTo:n,onMounted:j})}return null}();return e.createElement("div",d({id:s.id,ref:E,className:"p-blockui-container"},B),s.children,C)}));v.displayName="BlockUI",v.defaultProps={__TYPE:"BlockUI",id:null,blocked:!1,fullScreen:!1,baseZIndex:0,autoZIndex:!0,style:null,className:null,template:null,onBlocked:null,onUnblocked:null};export{v as BlockUI};
