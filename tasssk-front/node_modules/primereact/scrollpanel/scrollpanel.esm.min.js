import*as r from"react";import{useMountEffect as t,useUnmountEffect as n}from"primereact/hooks";import{ObjectUtils as l,classNames as c,DomHandler as u}from"primereact/utils";function o(){return o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}var a=r.forwardRef((function(s,i){var p=r.useRef(null),d=r.useRef(null),m=r.useRef(null),f=r.useRef(null),h=r.useRef(!1),g=r.useRef(!1),v=r.useRef(null),b=r.useRef(null),w=r.useRef(null),y=r.useRef(null),E=r.useRef(null),C=r.useRef(!1),x=function(){var e=d.current.scrollWidth,r=-1*(p.current.clientHeight-m.current.clientHeight);w.current=d.current.clientWidth/e;var t=d.current.scrollHeight,n=-1*(p.current.clientWidth-f.current.clientWidth);y.current=d.current.clientHeight/t,E.current=window.requestAnimationFrame((function(){w.current>=1?u.addClass(m.current,"p-scrollpanel-hidden"):(u.removeClass(m.current,"p-scrollpanel-hidden"),m.current.style.cssText="width:"+Math.max(100*w.current,10)+"%; left:"+d.current.scrollLeft/e*100+"%;bottom:"+r+"px;"),y.current>=1?u.addClass(f.current,"p-scrollpanel-hidden"):(u.removeClass(f.current,"p-scrollpanel-hidden"),f.current.style.cssText="height:"+Math.max(100*y.current,10)+"%; top: calc("+d.current.scrollTop/t*100+"% - "+m.current.clientHeight+"px);right:"+n+"px;")}))},R=function(e){h?L(e):(g||L(e),H(e))},L=function(e){var r=e.pageX-v.current;v.current=e.pageX,E.current=window.requestAnimationFrame((function(){d.current.scrollLeft+=r/w.current}))},H=function(r){var t=r.pageY-b.current;b.current=e.pageY,E.current=window.requestAnimationFrame((function(){d.current.scrollTop+=t/y.current}))},F=function e(r){u.removeClass(f.current,"p-scrollpanel-grabbed"),u.removeClass(m.current,"p-scrollpanel-grabbed"),u.removeClass(document.body,"p-scrollpanel-grabbed"),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",e),h.current=!1,g.current=!1},N=function(){x()};t((function(){var e,r,t;x(),window.addEventListener("resize",x),e=getComputedStyle(p.current),r=getComputedStyle(m.current),t=u.getHeight(p.current)-parseInt(r.height,10),"none"!==e["max-height"]&&0===t&&(p.current.style.height=d.current.offsetHeight+parseInt(r.height,10)>parseInt(e["max-height"],10)?e["max-height"]:d.current.offsetHeight+parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+"px"),C.current=!0})),n((function(){C.current&&window.removeEventListener("resize",x),E.current&&window.cancelAnimationFrame(E.current)})),r.useImperativeHandle(i,(function(){return{props:s,refresh:N,getElement:function(){return p.current},getContent:function(){return d.current},getXBar:function(){return m.current},getYBar:function(){return f.current}}}));var T=l.findDiffKeys(s,a.defaultProps),P=c("p-scrollpanel p-component",s.className);return r.createElement("div",o({ref:p,id:s.id,className:P,style:s.style},T),r.createElement("div",{className:"p-scrollpanel-wrapper"},r.createElement("div",{ref:d,className:"p-scrollpanel-content",onScroll:x,onMouseEnter:x},s.children)),r.createElement("div",{ref:m,className:"p-scrollpanel-bar p-scrollpanel-bar-x",onMouseDown:function(e){h.current=!0,v.current=e.pageX,u.addClass(m.current,"p-scrollpanel-grabbed"),u.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",R),document.addEventListener("mouseup",F),e.preventDefault()}}),r.createElement("div",{ref:f,className:"p-scrollpanel-bar p-scrollpanel-bar-y",onMouseDown:function(e){g.current=!0,b.current=e.pageY,u.addClass(f.current,"p-scrollpanel-grabbed"),u.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",R),document.addEventListener("mouseup",F),e.preventDefault()}}))}));a.displayName="ScrollPanel",a.defaultProps={__TYPE:"ScrollPanel",id:null,style:null,className:null};export{a as ScrollPanel};
